<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_05) on Sat Aug 25 13:55:12 CEST 2012 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>Overview (json-schema-validator 0.5.0beta6-SNAPSHOT API)</title>
<meta name="date" content="2012-08-25">
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Overview (json-schema-validator 0.5.0beta6-SNAPSHOT API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li>Use</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev</li>
<li>Next</li>
</ul>
<ul class="navList">
<li><a href="index.html?overview-summary.html" target="_top">Frames</a></li>
<li><a href="overview-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 class="title">json-schema-validator 0.5.0beta6-SNAPSHOT API</h1>
</div>
<div class="header">
<div class="subTitle">
<div class="block">A JSON Schema validator implementation in Java which aims for correctness and
performance, in that order</div>
</div>
<p>See: <a href="#overview_description">Description</a></p>
</div>
<div class="contentContainer">
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Packages table, listing packages, and an explanation">
<caption><span>Packages</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Package</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="org/eel/kitchen/jsonschema/bundle/package-summary.html">org.eel.kitchen.jsonschema.bundle</a></td>
<td class="colLast">
<div class="block">Schema keywords and keyword bundles</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="org/eel/kitchen/jsonschema/format/package-summary.html">org.eel.kitchen.jsonschema.format</a></td>
<td class="colLast">
<div class="block">Format specifier classes</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="org/eel/kitchen/jsonschema/keyword/package-summary.html">org.eel.kitchen.jsonschema.keyword</a></td>
<td class="colLast">
<div class="block">Schema validation core elements: keyword validators</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="org/eel/kitchen/jsonschema/main/package-summary.html">org.eel.kitchen.jsonschema.main</a></td>
<td class="colLast">
<div class="block">Main schema validation API</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="org/eel/kitchen/jsonschema/ref/package-summary.html">org.eel.kitchen.jsonschema.ref</a></td>
<td class="colLast">
<div class="block">JSON Reference related packages</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="org/eel/kitchen/jsonschema/syntax/package-summary.html">org.eel.kitchen.jsonschema.syntax</a></td>
<td class="colLast">
<div class="block">Schema syntax validation package</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="org/eel/kitchen/jsonschema/uri/package-summary.html">org.eel.kitchen.jsonschema.uri</a></td>
<td class="colLast">
<div class="block">JSON document downloaders</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="org/eel/kitchen/jsonschema/util/package-summary.html">org.eel.kitchen.jsonschema.util</a></td>
<td class="colLast">
<div class="block">Various utility packages</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="org/eel/kitchen/jsonschema/validator/package-summary.html">org.eel.kitchen.jsonschema.validator</a></td>
<td class="colLast">
<div class="block">Core validation process</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="footer"><a name="overview_description">
<!--   -->
</a>
<div class="subTitle">
<div class="block">A JSON Schema validator implementation in Java which aims for correctness and
performance, in that order

<h1>Why</h1>

<p>This implementation is meant to be purely server-side if Java is your
language of choice. You may, or may not, use it in your Java Web application,
the library has no dependencies at all on anything Web-related.</p>

<p>The two main characteristics of this library are its correctness with regards
to the schema specification, and its raw speed. Correctness in that, for
instance, it uses ECMA 262 for regexes and can validate numeric instances of
arbitrary length and/or precision. No other existing JSON Schema implementation
can do both of the latter points, and I can pretty much guarantee that no other
library is faster than this one.  If you find a counter example, I'd be glad to
hear of it!</p>

<h1>Sample usage</h1>

<h2>Create a <a href="org/eel/kitchen/jsonschema/main/JsonSchemaFactory.html" title="class in org.eel.kitchen.jsonschema.main"><code>JsonSchemaFactory</code></a></h2>

<p>You cannot instantiate one directly, you have to go through its included
<tt>Builder</tt> class for that. This is by design: it allows to freeze the
schema generation context. Here is the most simple way of building a factory
using default settings:</p>

<pre>
    final JsonSchemaFactory factory = new JsonSchemaFactory.Builder().build();
</pre>

<p>You can customize your factory in many ways:</p>

<ul>
    <li>registering/unregistering keywords;</li>
    <li>registering/unregistering URI schemes.</li>
</ul>

<p>See below, and refer to the javadoc for more details.</p>

<h2>Register/create a schema</h2>

<p>The class for this is <a href="org/eel/kitchen/jsonschema/main/JsonSchema.html" title="class in org.eel.kitchen.jsonschema.main"><code>JsonSchema</code></a>.
This is a three step process.</p>

<p>First of all, you need to grab your JSON Schema as a <a href="http://fasterxml.github.com/jackson-databind/javadoc/2.0.5/com/fasterxml/jackson/databind/JsonNode.html?is-external=true" title="class or interface in com.fasterxml.jackson.databind"><code>JsonNode</code></a>. For this, you may want to have a look
at the <a href="org/eel/kitchen/jsonschema/util/JsonLoader.html" title="class in org.eel.kitchen.jsonschema.util"><code>JsonLoader</code></a> class. Then, you need
to register this schema. This will create a <a href="org/eel/kitchen/jsonschema/main/SchemaContainer.html" title="class in org.eel.kitchen.jsonschema.main"><code>SchemaContainer</code></a> object. Finally, create a
schema out of this container.</p>

<p>The sample code below shows how to create a validating schema out of the
current v3 schema draft, bundled in this library (<b>NOTE</b>: <a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io"><code>IOException</code></a> not accounted for):</p>

<pre>
    final JsonNode rawSchema = JsonLoader.fromResource("/schema-draftv3.json");

    final SchemaContainer container = factory.registerSchema(rawSchema);

    final JsonSchema schema = factory.createSchema(container);
</pre>

<h2>Validate your data</h2>

<p>Currently, you must load the data to be validated as a <a href="http://fasterxml.github.com/jackson-databind/javadoc/2.0.5/com/fasterxml/jackson/databind/JsonNode.html?is-external=true" title="class or interface in com.fasterxml.jackson.databind"><code>JsonNode</code></a>. Here again, the <a href="org/eel/kitchen/jsonschema/util/JsonLoader.html" title="class in org.eel.kitchen.jsonschema.util"><code>JsonLoader</code></a> class may help you.</p>

<p>One <a href="org/eel/kitchen/jsonschema/main/JsonSchema.html" title="class in org.eel.kitchen.jsonschema.main"><code>JsonSchema</code></a> instance may validate
as many JSON documents as you want, in parallel: this class is inherently thread
safe. Sample code:</p>

<pre>
    // Here, instance is the data to validate

    final ValidationReport report = schema.validate(instance);

    // Validation is a success if the report is empty: test it as follows

    System.out.printf("Validation %s\n", report.isSuccess() ? "succeeded"
        : "failed");
</pre>

<h1>Customizing your schema factory</h1>

<p>First note that all customization is achieved via the associated builder:
once a factory is created, it cannot be modified.</p>

<h2>URIs and namespaces</h2>

<p>When resolving JSON References, relative URIs may be encountered. In
this case, they should be resolved against the parent schema's location. But
it can happen that the parent schema's location is empty: in this case,
the URI will not resolve.</p>

<p>This implementation adds the ability to set a default namespace: relative
URIs will then be resolved with regards to that namespace. This can be useful
if, for instance, you do local only validation and all your schemas are on the
local filesystem, and refer to one another in a relative way. You can do:</p>

<pre>
    // Note the ending /, it is necessary!
    final JsonSchemaFactory factory = new JsonSchemaFactory.Builder()
        .setNamespace("file:///path/to/base/directory/").build();
</pre>

<h2>Adding custom keywords</h2>

<p>For this, you need three elements:</p>

<ul>
    <li>the name for your new keyword;</li>
    <li>a <a href="org/eel/kitchen/jsonschema/syntax/SyntaxChecker.html" title="interface in org.eel.kitchen.jsonschema.syntax"><code>SyntaxChecker</code></a> instance;</li>
    <li>a <a href="org/eel/kitchen/jsonschema/keyword/KeywordValidator.html" title="class in org.eel.kitchen.jsonschema.keyword"><code>KeywordValidator</code></a>.</li>
</ul>

<p>The keyword validator needs to have one constructor taking a JsonNode as an
argument (keyword validators are built by reflection). You can then add the
keyword to your factory like this:
</p>

<pre>
    final Keyword myKeyword = Keyword.Builder.forName("mykeyword")
        .withSyntaxChecker(mySyntaxChecker)
        .withValidatorClass(MyKeywordValidator.class)
        .build();

    final JsonSchemaFactory factory = new JsonSchemaFactory.Builder()
        .addKeyword(myKeyword).build();
</pre>

<h2>Registering/unregistering URI schemes</h2>

<p>A JSON Schema locator is a URI, and this URI can be of any scheme. This
implementation has native support for <tt>http</tt>, <tt>ftp</tt>,
<tt>file</tt> and <tt>jar</tt>.</p>

<p>You can, if you wish, either override the existing supported schemes, or add
support for a new scheme, by implementing
<a href="org/eel/kitchen/jsonschema/uri/URIDownloader.html" title="interface in org.eel.kitchen.jsonschema.uri"><code>URIDownloader</code></a> and register it in your
factory, like this:</p>

<pre>
    final URIDownloader myDownloader = new URIDownloader()
    {
        \@Override
        public InputStream fetch(final URI source)
        {
            // your code here
        }
    };

    // Example of registering a new scheme and unregistering another one
    final JsonSchemaFactory factory = new JsonSchemaFactory.Builder()
        .registerScheme("myscheme", myDownloader)
        .unregisterScheme("ftp")
        .build();
</pre></div>
</div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li>Use</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev</li>
<li>Next</li>
</ul>
<ul class="navList">
<li><a href="index.html?overview-summary.html" target="_top">Frames</a></li>
<li><a href="overview-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2012. All Rights Reserved.</small></p>
</body>
</html>
